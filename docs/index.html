<!DOCTYPE html>
<html>
	<head>
		<title>roblox-ts playground</title>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

		<link rel="stylesheet" href="style.css" />
		<link rel="shortcut icon" href="roblox-ts.png" />
	</head>

	<body>
		<!-- <script src="bundle.js"></script> -->
		<script src="https://cdn.jsdelivr.net/npm/url-search-params@1.1.0/build/url-search-params.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/clipboard-polyfill@2.4.7/build/clipboard-polyfill.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.20.0/min/vs/loader.js"></script>
		<script>
			const params = new URLSearchParams(location.search);

			window.CONFIG = {
				monacoVersion: "0.20.0",
				baseUrl: location.protocol + "//" + location.host + location.pathname,
			};

			console.log("Monaco", window.CONFIG.monacoVersion);

			require.config({
				paths: { vs: `https://cdn.jsdelivr.net/npm/monaco-editor@${window.CONFIG.monacoVersion}/min/vs` },
				ignoreDuplicateModules: ["vs/editor/editor.main"],
			});
		</script>
		<div id="app">
			<div class="flash flash--hidden">
				<span class="flash__message"></span>
			</div>

			<header>
				<div
					class="header-item"
					style="display: flex; flex-direction: row; align-items: center;"
				>
					<div
						class="spinner"
						style="margin-left: -0.5em; margin-right: 0.5em;"
					></div>
					<p>roblox-ts</p>
				</div>

				<div
					style="margin-left: 1em;"
					class="header-item header-item--extra-padding popup-on-hover"
					id="examples"
				>
					<p class="popup-header">Examples</p>
					<div class="popup" style="min-width: 20em;">
						<ul>
							<li class="button" data-example="lava.ts">Lava</li>
							<li class="button" data-example="validateTree.ts">Validate Tree</li>
							<li class="button" data-example="character.ts">Character</li>
							<li class="button" data-example="roact.tsx">Roact JSX</li>
						</ul>
					</div>
				</div>
				<script>
					document
						.querySelector("#examples")
						.addEventListener("click", event => {
							if (event.target.matches("[data-example]")) {
								const exampleName = event.target.dataset.example;
								UI.selectExample(exampleName);
							}
						});
				</script>
			</header>
			<main id="playground">
				<section id="input"></section>
				<section id="output"></section>
			</main>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>
		<script src="main.js"></script>
		<script>
			require(["vs/editor/editor.main"], main);
		</script>
	</body>
</html>
